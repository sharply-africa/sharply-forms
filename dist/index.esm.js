import e from"react";import{Stack as r,FormGroup as n,Label as t,Input as l,FormError as a,TagsInput as i,Checkbox as o,Textarea as s,Switch as m,Select as d,Radio as c,Button as u,Card as p,Text as E}from"skylos-ui";import{useForm as v,Controller as h}from"react-hook-form";import{yupResolver as g}from"@hookform/resolvers/yup";import*as f from"yup";import{parsePhoneNumberFromString as b}from"libphonenumber-js";function w(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function y(){return(y=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function P(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function S(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?P(Object(n),!0).forEach((function(r){w(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var N=f.object().shape({password:f.string().min(8,"Password must be at least 8 characters").required("Password is required"),confirmPassword:f.string().min(8,"Password must be at least 8 characters").required("Password is required").oneOf([f.ref("password"),null],"Password and confirm password must match")}),F=f.object().shape({currentPassword:f.string().min(8,"Password must be at least 8 characters").required("Password is required"),newPassword:f.string().min(8,"Password must be at least 8 characters").required("Password is required"),confirmPassword:f.string().min(8,"Password must be at least 8 characters").required("Password is required").oneOf([f.ref("newPassword"),null],"New password and confirm password must match")}),q=f.object().shape({username:f.string().required("Email address or phone number is required"),password:f.string().min(8,"Password must be at least 8 characters").required("Password is required"),rememberMe:f.boolean().required()});f.addMethod(f.string,"phone",(function(){return this.test("phone","Phone number is not a valid Nigerian number",(function(e){var r;return!e||(null===(r=b(e,"NG"))||void 0===r?void 0:r.isValid())}))}));var C=function(e){var r=e.isAdmin,n=e.requiredSender;return f.object().shape(S({allowDescription:f.boolean(),chargeRecipient:f.boolean(),payOnDelivery:f.boolean(),customer:f.string(),description:f.string(),items:f.array().min(1,"Please enter at least one item").required("Item(s) are required"),recipient:f.object().shape({address:f.string().required("Address is required"),email:f.string().email("Email is invalid"),name:f.string().required("Name is required"),phoneNumber:f.string().phone().required("Phone number is required")}),sender:f.object().shape(S({address:f.string().required("Address is required"),email:f.string().email("Email is invalid")},n?{name:f.string().required("Name is required"),phoneNumber:f.string().phone().required("Phone number is required")}:{name:f.string(),phoneNumber:f.string().phone()}))},r?{deliveryFee:f.string().required("Delivery amount is required"),rider:f.string().required("Please select rider")}:{}))},T=function(p){var E,f,b,w,P,S,N,F,q,T,R,O,x,A,D,j,k,L,I,V=p.buttonText,M=p.isLoading,U=p.onSubmit,G=p.riders,Y=p.schema,K=v({resolver:g(Y||C({isAdmin:!0,requiredSender:!0})),defaultValues:{allowDescription:!1,chargeRecipient:!1,customer:"sender",items:[],payOnDelivery:!1,rider:""}}),z=K.register,B=K.handleSubmit,H=K.errors,J=K.control,Q=(0,K.watch)("allowDescription");return e.createElement(r,{as:"form",spacing:6,onSubmit:B(U)},e.createElement(n,null,e.createElement(t,{htmlFor:"sender.name"},"Senders Name"),e.createElement(l,{id:"sender.name",name:"sender.name",placeholder:"Type name",ref:z}),e.createElement(a,{error:null==H||null===(E=H.sender)||void 0===E||null===(f=E.name)||void 0===f?void 0:f.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"sender.phoneNumber"},"Senders number"),e.createElement(h,{control:J,name:"sender.phoneNumber",render:function(r){return e.createElement(l,y({id:"sender.phoneNumber",onlyCountries:["ng"],type:"phone"},r))}}),e.createElement(a,{error:null==H||null===(b=H.sender)||void 0===b||null===(w=b.phoneNumber)||void 0===w?void 0:w.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"sender.email"},"Senders Email"),e.createElement(l,{id:"sender.email",name:"sender.email",placeholder:"Type Email Address (Optional)",ref:z}),e.createElement(a,{error:null==H||null===(P=H.sender)||void 0===P||null===(S=P.email)||void 0===S?void 0:S.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"sender.address"},"Pick Up Address"),e.createElement(l,{id:"sender.address",type:"address",name:"sender.address",placeholder:"Type Address",ref:z}),e.createElement(a,{error:null==H||null===(N=H.sender)||void 0===N||null===(F=N.address)||void 0===F?void 0:F.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"recipient.address"},"Receiver Address"),e.createElement(l,{id:"recipient.address",type:"address",name:"recipient.address",placeholder:"Type Address",ref:z}),e.createElement(a,{error:null==H||null===(q=H.recipient)||void 0===q||null===(T=q.address)||void 0===T?void 0:T.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"items"},"Item(s)"),e.createElement(h,{control:J,name:"items",render:function(r){var n=r.onChange,t=r.value;return e.createElement(i,{value:t,onChange:n})}}),e.createElement(a,{error:null==H||null===(R=H.items)||void 0===R?void 0:R.message})),e.createElement(n,null,e.createElement(h,{control:J,name:"allowDescription",render:function(r){var n=r.onChange,t=r.value;return e.createElement(o,{active:t,onChange:n,title:"Allow Description"})}})),Q?e.createElement(n,null,e.createElement(t,{htmlFor:"description"},"Description"),e.createElement(s,{id:"description",name:"description",placeholder:"Type Name",ref:z,required:!0}),e.createElement(a,{error:null==H||null===(O=H.description)||void 0===O?void 0:O.message})):null,e.createElement(n,null,e.createElement(t,{htmlFor:"recipient.name"},"Receiver Name"),e.createElement(l,{id:"recipient.name",name:"recipient.name",placeholder:"Type Name",ref:z}),e.createElement(a,{error:null==H||null===(x=H.recipient)||void 0===x||null===(A=x.name)||void 0===A?void 0:A.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"recipient.phoneNumber"},"Receiver Number"),e.createElement(h,{control:J,name:"recipient.phoneNumber",render:function(r){return e.createElement(l,y({id:"recipient.phoneNumber",onlyCountries:["ng"],type:"phone"},r))}}),e.createElement(a,{error:null==H||null===(D=H.recipient)||void 0===D||null===(j=D.phoneNumber)||void 0===j?void 0:j.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"deliveryFee"},"Delivery Amount"),e.createElement(l,{id:"deliveryFee",name:"deliveryFee",placeholder:"NGN",ref:z}),e.createElement(a,{error:null==H||null===(k=H.deliveryFee)||void 0===k?void 0:k.message})),e.createElement(n,null,e.createElement(h,{control:J,name:"payOnDelivery",render:function(r){var n=r.onChange,t=r.value;return e.createElement(m,{active:t,onChange:n,title:"The item will be paid for on delivery"})}})),e.createElement(n,null,e.createElement(h,{control:J,name:"chargeRecipient",render:function(r){var n=r.onChange,t=r.value;return e.createElement(m,{active:t,onChange:n,title:"The Receiver will be paying for delivery"})}})),e.createElement(n,null,e.createElement(t,{htmlFor:"rider"},"Assign Rider"),e.createElement(d,{id:"rider",name:"rider",placeholder:"Select option",ref:z},e.createElement("option",{value:"",disabled:!0},"Select Option"),null==G?void 0:G.map((function(r){return e.createElement("option",{key:r.id,value:r.id},r.name)}))),e.createElement(a,{error:null==H||null===(L=H.rider)||void 0===L?void 0:L.message})),e.createElement(n,null,e.createElement(h,{control:J,name:"customer",render:function(n){var t=n.onChange,l=n.value;return e.createElement(r,{spacing:6},e.createElement(c,{active:"sender"===l,onClick:function(){return t("sender")},subtitle:"Request was made by the sender",title:"Save sender’s details"}),e.createElement(c,{active:"recipient"===l,onClick:function(){return t("recipient")},subtitle:"Request was made by the receiver",title:"Save receiver’s details"}))}}),e.createElement(a,{error:null==H||null===(I=H.customer)||void 0===I?void 0:I.message})),e.createElement(u,{defaultRightIcon:!0,isLoading:M,onClick:B(U)},V))};T.defaultProps={buttonText:"Submit Request",isLoading:!1,onSubmit:function(){},riders:[],schema:null};var R=function(f){var b,w,P,S,N,F,q,T,R,O,x,A,D,j=f.buttonText,k=f.isLoading,L=f.onSubmit,I=f.riders,V=f.schema,M="admin"===f.type,U=v({resolver:g(V||C({isAdmin:M,requiredSender:!1})),defaultValues:{allowDescription:!1,chargeRecipient:!1,customer:"sender",items:[],payOnDelivery:!1,rider:""}}),G=U.register,Y=U.handleSubmit,K=U.errors,z=U.control,B=(0,U.watch)("allowDescription");return e.createElement(r,{as:"form",spacing:6,onSubmit:Y(L)},e.createElement(n,null,e.createElement(t,{htmlFor:"customer"},M?"Customer is the?":"You are the?"),e.createElement(h,{control:z,name:"customer",render:function(n){var t=n.onChange,l=n.value;return e.createElement(r,{direction:"row",spacing:4},e.createElement(p,{onClick:function(){return t("sender")},sx:{boxShadow:"none"}},e.createElement(c,{title:"Sender",active:"sender"===l})),e.createElement(p,{onClick:function(){return t("recipient")},sx:{boxShadow:"none"}},e.createElement(c,{active:"recipient"===l,title:"Receiver"})))}}),e.createElement(a,{error:null==K||null===(b=K.customer)||void 0===b?void 0:b.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"sender.address"},"Pick Up Address"),e.createElement(l,{id:"sender.address",name:"sender.address",placeholder:"Type Address",type:"address",ref:G}),e.createElement(a,{error:null==K||null===(w=K.sender)||void 0===w||null===(P=w.address)||void 0===P?void 0:P.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"recipient.address"},"Receiver Address"),e.createElement(l,{id:"recipient.address",name:"recipient.address",placeholder:"Type Address",type:"address",ref:G}),e.createElement(a,{error:null==K||null===(S=K.recipient)||void 0===S||null===(N=S.address)||void 0===N?void 0:N.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"items"},"Item(s)"),e.createElement(h,{control:z,name:"items",render:function(r){var n=r.onChange,t=r.value;return e.createElement(i,{value:t,onChange:n})}}),e.createElement(a,{error:null==K||null===(F=K.items)||void 0===F?void 0:F.message})),e.createElement(n,null,e.createElement(h,{control:z,name:"allowDescription",render:function(r){var n=r.onChange,t=r.value;return e.createElement(o,{active:t,onChange:n,title:"Allow Description"})}})),B?e.createElement(n,null,e.createElement(t,{htmlFor:"description"},"Description"),e.createElement(s,{id:"description",name:"description",placeholder:"Type Name",ref:G,required:!0}),e.createElement(a,{error:null==K||null===(q=K.description)||void 0===q?void 0:q.message})):null,e.createElement(n,null,e.createElement(t,{htmlFor:"recipient.name"},"Receiver Name"),e.createElement(l,{id:"recipient.name",name:"recipient.name",placeholder:"Type Name",ref:G}),e.createElement(a,{error:null==K||null===(T=K.recipient)||void 0===T||null===(R=T.name)||void 0===R?void 0:R.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"recipient.phoneNumber"},"Receiver Number"),e.createElement(h,{control:z,name:"recipient.phoneNumber",render:function(r){return e.createElement(l,y({id:"recipient.phoneNumber",onlyCountries:["ng"],type:"phone"},r))}}),e.createElement(a,{error:null==K||null===(O=K.recipient)||void 0===O||null===(x=O.phoneNumber)||void 0===x?void 0:x.message})),M?e.createElement(e.Fragment,null,e.createElement(n,null,e.createElement(t,{htmlFor:"deliveryFee"},"Delivery Amount"),e.createElement(l,{id:"deliveryFee",name:"deliveryFee",placeholder:"NGN",ref:G}),e.createElement(a,{error:null==K||null===(A=K.deliveryFee)||void 0===A?void 0:A.message})),e.createElement(n,null,e.createElement(h,{control:z,name:"payOnDelivery",render:function(r){var n=r.onChange,t=r.value;return e.createElement(m,{active:t,onChange:n,title:"The item will be paid for on delivery"})}}))):null,e.createElement(n,null,e.createElement(h,{control:z,name:"chargeRecipient",render:function(r){var n=r.onChange,t=r.value;return e.createElement(m,{active:t,onChange:n,title:"The Receiver will be paying for delivery"})}})),M?e.createElement(n,null,e.createElement(t,{htmlFor:"rider"},"Assign Rider"),e.createElement(d,{id:"rider",name:"rider",placeholder:"Select option",ref:G},e.createElement("option",{value:"",disabled:!0},"Select Option"),null==I?void 0:I.map((function(r){return e.createElement("option",{key:r.id,value:r.id},r.name)}))),e.createElement(a,{error:null==K||null===(D=K.rider)||void 0===D?void 0:D.message})):e.createElement(p,null,e.createElement(E,null,"Request Submitted will have to be accepted and an estimate will be sent")),e.createElement(u,{defaultRightIcon:!0,isLoading:k,onClick:Y(L)},j))};R.defaultProps={buttonText:"Submit Request",isLoading:!1,onSubmit:function(){},riders:[],schema:null,type:"client"};var O=function(d){var f,b,w,P,S,N,F,q,T,R,O,x,A,D,j,k,L,I=d.buttonText,V=d.isLoading,M=d.onSubmit,U=d.schema,G=v({resolver:g(U||C({isAdmin:!1,requiredSender:!0})),defaultValues:{allowDescription:!1,chargeRecipient:!1,customer:"sender",items:[]}}),Y=G.register,K=G.handleSubmit,z=G.errors,B=G.control,H=(0,G.watch)("allowDescription");return e.createElement(r,{as:"form",spacing:6,onSubmit:K(M)},e.createElement(n,null,e.createElement(t,{htmlFor:"customer"},"You are the?"),e.createElement(h,{control:B,name:"customer",render:function(n){var t=n.onChange,l=n.value;return e.createElement(r,{direction:"row",spacing:4},e.createElement(p,{onClick:function(){return t("sender")},sx:{boxShadow:"none"}},e.createElement(c,{title:"Sender",active:"sender"===l})),e.createElement(p,{onClick:function(){return t("recipient")},sx:{boxShadow:"none"}},e.createElement(c,{active:"recipient"===l,title:"Receiver"})))}}),e.createElement(a,{error:null==z||null===(f=z.customer)||void 0===f?void 0:f.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"sender.name"},"Senders Name"),e.createElement(l,{id:"sender.name",name:"sender.name",placeholder:"Type name",ref:Y}),e.createElement(a,{error:null==z||null===(b=z.sender)||void 0===b||null===(w=b.name)||void 0===w?void 0:w.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"sender.phoneNumber"},"Senders number"),e.createElement(h,{control:B,name:"sender.phoneNumber",render:function(r){return e.createElement(l,y({id:"sender.phoneNumber",onlyCountries:["ng"],type:"phone"},r))}}),e.createElement(a,{error:null==z||null===(P=z.sender)||void 0===P||null===(S=P.phoneNumber)||void 0===S?void 0:S.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"sender.email"},"Senders Email"),e.createElement(l,{id:"sender.email",name:"sender.email",placeholder:"Type Email Address (Optional)",ref:Y}),e.createElement(a,{error:null==z||null===(N=z.sender)||void 0===N||null===(F=N.email)||void 0===F?void 0:F.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"sender.address"},"Pick Up Address"),e.createElement(l,{id:"sender.address",name:"sender.address",placeholder:"Type Address",type:"address",ref:Y}),e.createElement(a,{error:null==z||null===(q=z.sender)||void 0===q||null===(T=q.address)||void 0===T?void 0:T.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"recipient.address"},"Receiver Address"),e.createElement(l,{id:"recipient.address",name:"recipient.address",placeholder:"Type Address",type:"address",ref:Y}),e.createElement(a,{error:null==z||null===(R=z.recipient)||void 0===R||null===(O=R.address)||void 0===O?void 0:O.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"items"},"Item(s)"),e.createElement(h,{control:B,name:"items",render:function(r){var n=r.onChange,t=r.value;return e.createElement(i,{value:t,onChange:n})}}),e.createElement(a,{error:null==z||null===(x=z.items)||void 0===x?void 0:x.message})),e.createElement(n,null,e.createElement(h,{control:B,name:"allowDescription",render:function(r){var n=r.onChange,t=r.value;return e.createElement(o,{active:t,onChange:n,title:"Allow Description"})}})),H?e.createElement(n,null,e.createElement(t,{htmlFor:"description"},"Description"),e.createElement(s,{id:"description",name:"description",placeholder:"Type Name",ref:Y,required:!0}),e.createElement(a,{error:null==z||null===(A=z.description)||void 0===A?void 0:A.message})):null,e.createElement(n,null,e.createElement(t,{htmlFor:"recipient.name"},"Receiver Name"),e.createElement(l,{id:"recipient.name",name:"recipient.name",placeholder:"Type Name",ref:Y}),e.createElement(a,{error:null==z||null===(D=z.recipient)||void 0===D||null===(j=D.name)||void 0===j?void 0:j.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"recipient.phoneNumber"},"Receiver Number"),e.createElement(h,{control:B,name:"recipient.phoneNumber",render:function(r){return e.createElement(l,y({id:"recipient.phoneNumber",onlyCountries:["ng"],type:"phone"},r))}}),e.createElement(a,{error:null==z||null===(k=z.recipient)||void 0===k||null===(L=k.phoneNumber)||void 0===L?void 0:L.message})),e.createElement(n,null,e.createElement(h,{control:B,name:"chargeRecipient",render:function(r){var n=r.onChange,t=r.value;return e.createElement(m,{active:t,onChange:n,title:"The Receiver will be paying for delivery"})}})),e.createElement(p,null,e.createElement(E,null,"Request Submitted will have to be accepted and an estimate will be sent")),e.createElement(u,{defaultRightIcon:!0,isLoading:V,onClick:K(M)},I))};O.defaultProps={buttonText:"Submit Request",extras:null,isLoading:!1,onSubmit:function(){},type:"client",schema:null};var x=function(i){var s,m,d=i.buttonText,c=i.extras,p=i.isLoading,E=i.onSubmit,f=i.schema,b=v({resolver:g(f||q),defaultValues:{rememberMe:!1}}),w=b.register,y=b.handleSubmit,P=b.errors,S=b.control;return e.createElement(r,{as:"form",spacing:6,onSubmit:y(E)},e.createElement(n,null,e.createElement(t,{htmlFor:"username"},"Email Address or Phone Number"),e.createElement(l,{id:"username",name:"username",placeholder:"Type your email address or Phone Number",ref:w}),e.createElement(a,{error:null==P||null===(s=P.username)||void 0===s?void 0:s.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"password"},"Password"),e.createElement(l,{id:"password",placeholder:"Type your password",type:"password",name:"password",ref:w}),e.createElement(a,{error:null==P||null===(m=P.password)||void 0===m?void 0:m.message})),e.createElement(n,null,e.createElement(h,{control:S,name:"rememberMe",render:function(r){var n=r.onChange,t=r.value;return e.createElement(o,{active:t,onChange:n,title:"Keep me logged in"})}})),e.createElement(u,{defaultRightIcon:!0,isLoading:p,onClick:y(E)},d),c)};x.defaultProps={buttonText:"Login",extras:null,isLoading:!1,onSubmit:function(){},schema:null};var A=function(i){var o,s,m,d=i.buttonText,c=i.extras,p=i.isLoading,E=i.onSubmit,h=i.schema,f=v({resolver:g(h||F),defaultValues:{rememberMe:!1}}),b=f.register,w=f.handleSubmit,y=f.errors;return e.createElement(r,{as:"form",spacing:6,onSubmit:w(E)},e.createElement(n,null,e.createElement(t,{htmlFor:"currentPassword"},"Current Password"),e.createElement(l,{id:"currentPassword",placeholder:"Type your password",type:"password",name:"currentPassword",ref:b}),e.createElement(a,{error:null==y||null===(o=y.currentPassword)||void 0===o?void 0:o.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"newPassword"},"New Password"),e.createElement(l,{id:"newPassword",placeholder:"Type your password",type:"password",name:"newPassword",ref:b}),e.createElement(a,{error:null==y||null===(s=y.newPassword)||void 0===s?void 0:s.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"confirmPassword"},"Re-enter New Password"),e.createElement(l,{id:"confirmPassword",placeholder:"Type your password",type:"password",name:"confirmPassword",ref:b}),e.createElement(a,{error:null==y||null===(m=y.confirmPassword)||void 0===m?void 0:m.message})),e.createElement(u,{defaultRightIcon:!0,isLoading:p,onClick:w(E)},d),c)};A.defaultProps={buttonText:"Update Password",extras:null,isLoading:!1,onSubmit:function(){},schema:null};var D=function(i){var o,s,m=i.buttonText,d=i.extras,c=i.isLoading,p=i.onSubmit,E=i.schema,h=v({resolver:g(E||N),defaultValues:{rememberMe:!1}}),f=h.register,b=h.handleSubmit,w=h.errors;return e.createElement(r,{as:"form",spacing:6,onSubmit:b(p)},e.createElement(n,null,e.createElement(t,{htmlFor:"password"},"Password"),e.createElement(l,{id:"password",placeholder:"Type your password",type:"password",name:"password",ref:f}),e.createElement(a,{error:null==w||null===(o=w.password)||void 0===o?void 0:o.message})),e.createElement(n,null,e.createElement(t,{htmlFor:"confirmPassword"},"Re-enter Password"),e.createElement(l,{id:"confirmPassword",placeholder:"Type your password",type:"password",name:"confirmPassword",ref:f}),e.createElement(a,{error:null==w||null===(s=w.confirmPassword)||void 0===s?void 0:s.message})),e.createElement(u,{defaultRightIcon:!0,isLoading:c,onClick:b(p)},m),d)};D.defaultProps={buttonText:"Reset Password",extras:null,isLoading:!1,onSubmit:function(){},schema:null};export{T as AdminOrderForm,A as ChangePasswordForm,R as CustomerOrderForm,O as GuestOrderForm,x as LoginForm,D as PasswordForm,F as confirmPasswordSchema,q as loginSchema,C as orderSchema,N as passwordSchema};
